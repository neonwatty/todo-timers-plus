<%= turbo_frame_tag dom_id(timer, :dashboard_active), class: "contents" do %>
  <div class="p-6 hover:bg-gray-50 transition-colors duration-150" 
       data-timer-id="<%= timer.id %>"
       data-controller="countdown-timer"
       data-countdown-timer-timer-id-value="<%= timer.id %>"
       data-countdown-timer-status-value="<%= timer.status %>"
       data-countdown-timer-start-time-value="<%= timer.start_time&.iso8601 %>"
       data-countdown-timer-target-duration-value="<%= timer.target_duration || 0 %>"
       data-countdown-timer-remaining-duration-value="<%= timer.calculate_remaining_time %>"
       data-countdown-timer-is-countdown-value="<%= timer.countdown? %>"
       data-countdown-timer-update-url-value="<%= timer_path(timer) %>">
    <div class="flex items-center justify-between">
      <div class="flex-1 min-w-0">
        <h3 class="text-base font-medium text-gray-900 truncate">
          <%= timer.task_name %>
        </h3>
        <div class="mt-2 flex items-center gap-4">
          <span class="text-2xl <%= timer.expired? ? 'text-red-600' : 'text-blue-600' %> <%= 'animate-pulse-subtle' if timer.running? %>"
                data-countdown-timer-target="display">
            <%= timer.formatted_duration %>
          </span>
          <% if timer.running? %>
            <span class="badge-success">Running</span>
          <% elsif timer.paused? %>
            <span class="badge-warning">Paused</span>
          <% elsif timer.expired? %>
            <span class="badge-danger">Expired</span>
          <% end %>
        </div>
        <% if timer.countdown? && timer.target_duration.present? %>
          <div class="mt-2 w-full bg-gray-200 rounded-full h-1.5">
            <div class="bg-blue-600 h-1.5 rounded-full transition-all duration-300"
                 data-countdown-timer-target="progressBar"
                 style="width: <%= timer.progress_percentage %>%"></div>
          </div>
        <% end %>
      </div>
      <div class="ml-4 flex items-center gap-2">
        <%= render 'timers/timer_controls', timer: timer %>
      </div>
    </div>
  </div>
<% end %>